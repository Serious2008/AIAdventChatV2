# ü§ñ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –∞–≥–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —á–∞—Ç–µ

## üéØ –ó–∞–¥–∞—á–∞

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á–∞—Ç–µ:**
```
"–ü–∏—à–∏ –º–Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å. –ü–æ–≤—Ç–æ—Ä—è–π —Ä–∞–∑ –≤ —á–∞—Å."
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–∞–∂–¥—ã–π —á–∞—Å –≤ —á–∞—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–≥–æ–¥–æ–π
- –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ–Ω–µ
- –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ MCP —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–≥–æ–¥—ã

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á–∞—Ç–µ                                         ‚îÇ
‚îÇ "–ü–∏—à–∏ –º–Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ. –ü–æ–≤—Ç–æ—Ä—è–π —Ä–∞–∑ –≤ —á–∞—Å"         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Claude —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏                                      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Claude –ø–æ–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤—ã–∑—ã–≤–∞–µ—Ç:                          ‚îÇ
‚îÇ create_periodic_task(                                       ‚îÇ
‚îÇ     action: "get_weather_summary",                          ‚îÇ
‚îÇ     interval: "1 hour",                                     ‚îÇ
‚îÇ     parameters: { city: "Moscow" }                          ‚îÇ
‚îÇ )                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PeriodicTaskService (Swift)                                 ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ 1. –°–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É –≤ –ë–î                                     ‚îÇ
‚îÇ 2. –ó–∞–ø—É—Å–∫–∞–µ—Ç Timer                                          ‚îÇ
‚îÇ 3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ Claude                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚îÇ –ö–∞–∂–¥—ã–π —á–∞—Å
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Task Executor                                               ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ 1. –í—ã–∑—ã–≤–∞–µ—Ç MCP Weather Server                             ‚îÇ
‚îÇ 2. –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ                                 ‚îÇ
‚îÇ 3. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ                                    ‚îÇ
‚îÇ 4. –î–æ–±–∞–≤–ª—è–µ—Ç –≤ —á–∞—Ç –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–≥–µ–Ω—Ç–∞                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Chat (–Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ ü§ñ –ü–æ–≥–æ–¥–Ω—ã–π –∞–≥–µ–Ω—Ç ‚Ä¢ 14:00                                  ‚îÇ
‚îÇ ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ                           ‚îÇ
‚îÇ üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å:                      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ ‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: +15¬∞C                                        ‚îÇ
‚îÇ ‚Ä¢ –û–±–ª–∞—á–Ω–æ—Å—Ç—å: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å                        ‚îÇ
‚îÇ ‚Ä¢ –í–µ—Ç–µ—Ä: 5 –º/—Å, —Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–Ω—ã–π                           ‚îÇ
‚îÇ ‚Ä¢ –í–ª–∞–∂–Ω–æ—Å—Ç—å: 65%                                            ‚îÇ
‚îÇ ‚Ä¢ –î–∞–≤–ª–µ–Ω–∏–µ: 745 –º–º —Ä—Ç. —Å—Ç.                                 ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ –°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 15:00                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. MCP Weather Server (Node.js)

–°–æ–∑–¥–∞—ë–º –æ—Ç–¥–µ–ª—å–Ω—ã–π MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã:

```typescript
// mcp-weather-server/src/index.ts
import { Server } from "@modelcontextprotocol/sdk/server/index.js";
import axios from "axios";

class WeatherMCPServer {
    private apiKey: string;

    constructor(apiKey: string) {
        this.apiKey = apiKey; // OpenWeatherMap API key
    }

    // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    getTools() {
        return [
            {
                name: "get_current_weather",
                description: "–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞",
                input_schema: {
                    type: "object",
                    properties: {
                        city: {
                            type: "string",
                            description: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: Moscow, London)"
                        },
                        units: {
                            type: "string",
                            description: "–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (metric –∏–ª–∏ imperial)",
                            enum: ["metric", "imperial"]
                        }
                    },
                    required: ["city"]
                }
            },
            {
                name: "get_weather_summary",
                description: "–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –ø–æ–≥–æ–¥—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å",
                input_schema: {
                    type: "object",
                    properties: {
                        city: {
                            type: "string",
                            description: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞"
                        }
                    },
                    required: ["city"]
                }
            }
        ];
    }

    async getCurrentWeather(city: string, units = "metric") {
        const url = `https://api.openweathermap.org/data/2.5/weather`;
        const response = await axios.get(url, {
            params: {
                q: city,
                appid: this.apiKey,
                units: units,
                lang: "ru"
            }
        });

        const data = response.data;
        return {
            city: data.name,
            temperature: data.main.temp,
            feels_like: data.main.feels_like,
            humidity: data.main.humidity,
            pressure: data.main.pressure,
            description: data.weather[0].description,
            wind_speed: data.wind.speed,
            wind_direction: this.getWindDirection(data.wind.deg),
            clouds: data.clouds.all,
            timestamp: new Date().toISOString()
        };
    }

    async getWeatherSummary(city: string) {
        const weather = await this.getCurrentWeather(city);

        return `üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ ${weather.city}:

‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${weather.temperature}¬∞C (–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ ${weather.feels_like}¬∞C)
‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏–µ: ${weather.description}
‚Ä¢ –í–µ—Ç–µ—Ä: ${weather.wind_speed} –º/—Å, ${weather.wind_direction}
‚Ä¢ –í–ª–∞–∂–Ω–æ—Å—Ç—å: ${weather.humidity}%
‚Ä¢ –î–∞–≤–ª–µ–Ω–∏–µ: ${Math.round(weather.pressure * 0.75)} –º–º —Ä—Ç. —Å—Ç.
‚Ä¢ –û–±–ª–∞—á–Ω–æ—Å—Ç—å: ${weather.clouds}%

–û–±–Ω–æ–≤–ª–µ–Ω–æ: ${new Date(weather.timestamp).toLocaleTimeString('ru-RU')}`;
    }

    private getWindDirection(deg: number): string {
        const directions = [
            "—Å–µ–≤–µ—Ä–Ω—ã–π", "—Å–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π", "–≤–æ—Å—Ç–æ—á–Ω—ã–π", "—é–≥–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π",
            "—é–∂–Ω—ã–π", "—é–≥–æ-–∑–∞–ø–∞–¥–Ω—ã–π", "–∑–∞–ø–∞–¥–Ω—ã–π", "—Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–Ω—ã–π"
        ];
        return directions[Math.round(deg / 45) % 8];
    }
}

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
const server = new WeatherMCPServer(process.env.OPENWEATHER_API_KEY || "");
// ... MCP server initialization
```

---

### 2. PeriodicTask Model (Swift)

```swift
// Models/PeriodicTask.swift
import Foundation

struct PeriodicTask: Codable, Identifiable {
    let id: UUID
    var action: String              // "get_weather_summary"
    var parameters: [String: String] // { "city": "Moscow" }
    var interval: TimeInterval       // 3600 (1 —á–∞—Å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
    var isActive: Bool
    var createdAt: Date
    var lastExecutedAt: Date?
    var nextExecutionAt: Date
    var executionCount: Int

    init(action: String, parameters: [String: String], interval: TimeInterval) {
        self.id = UUID()
        self.action = action
        self.parameters = parameters
        self.interval = interval
        self.isActive = true
        self.createdAt = Date()
        self.lastExecutedAt = nil
        self.nextExecutionAt = Date().addingTimeInterval(interval)
        self.executionCount = 0
    }
}
```

---

### 3. PeriodicTaskService (Swift)

```swift
// Services/PeriodicTaskService.swift
import Foundation
import Combine

class PeriodicTaskService: ObservableObject {
    @Published var activeTasks: [PeriodicTask] = []

    private var timers: [UUID: Timer] = [:]
    private let weatherService: WeatherService
    private let chatViewModel: ChatViewModel

    init(weatherService: WeatherService, chatViewModel: ChatViewModel) {
        self.weatherService = weatherService
        self.chatViewModel = chatViewModel
        loadTasks()
    }

    // MARK: - Task Management

    func createTask(
        action: String,
        parameters: [String: String],
        intervalMinutes: Int
    ) -> PeriodicTask {
        let interval = TimeInterval(intervalMinutes * 60)
        let task = PeriodicTask(
            action: action,
            parameters: parameters,
            interval: interval
        )

        activeTasks.append(task)
        saveTasks()
        scheduleTask(task)

        return task
    }

    func stopTask(id: UUID) {
        if let index = activeTasks.firstIndex(where: { $0.id == id }) {
            activeTasks[index].isActive = false
            timers[id]?.invalidate()
            timers.removeValue(forKey: id)
            saveTasks()
        }
    }

    func resumeTask(id: UUID) {
        if let index = activeTasks.firstIndex(where: { $0.id == id }) {
            activeTasks[index].isActive = true
            scheduleTask(activeTasks[index])
            saveTasks()
        }
    }

    func deleteTask(id: UUID) {
        timers[id]?.invalidate()
        timers.removeValue(forKey: id)
        activeTasks.removeAll { $0.id == id }
        saveTasks()
    }

    // MARK: - Task Execution

    private func scheduleTask(_ task: PeriodicTask) {
        // –û—Ç–º–µ–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–∞–π–º–µ—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
        timers[task.id]?.invalidate()

        // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
        let timer = Timer.scheduledTimer(
            withTimeInterval: task.interval,
            repeats: true
        ) { [weak self] _ in
            Task {
                await self?.executeTask(task)
            }
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∞–π–º–µ—Ä
        timers[task.id] = timer

        // –í—ã–ø–æ–ª–Ω—è–µ–º —Å—Ä–∞–∑—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
        Task {
            await executeTask(task)
        }
    }

    private func executeTask(_ task: PeriodicTask) async {
        guard task.isActive else { return }

        print("üîÑ Executing periodic task: \(task.action)")

        do {
            let result = try await performAction(
                action: task.action,
                parameters: task.parameters
            )

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–¥–∞—á–∏
            if let index = activeTasks.firstIndex(where: { $0.id == task.id }) {
                activeTasks[index].lastExecutedAt = Date()
                activeTasks[index].nextExecutionAt = Date().addingTimeInterval(task.interval)
                activeTasks[index].executionCount += 1
                saveTasks()
            }

            // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —á–∞—Ç
            await addResultToChat(result: result, task: task)

        } catch {
            print("‚ùå Error executing periodic task: \(error)")
        }
    }

    private func performAction(
        action: String,
        parameters: [String: String]
    ) async throws -> String {
        switch action {
        case "get_weather_summary":
            guard let city = parameters["city"] else {
                throw NSError(domain: "PeriodicTask", code: -1,
                            userInfo: [NSLocalizedDescriptionKey: "Missing city parameter"])
            }
            return try await weatherService.getWeatherSummary(city: city)

        case "get_yandex_tracker_stats":
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
            return try await getTrackerStats()

        default:
            throw NSError(domain: "PeriodicTask", code: -2,
                        userInfo: [NSLocalizedDescriptionKey: "Unknown action: \(action)"])
        }
    }

    private func addResultToChat(result: String, task: PeriodicTask) async {
        await MainActor.run {
            // –°–æ–∑–¥–∞—ë–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–≥–µ–Ω—Ç–∞
            let agentMessage = Message(
                content: result,
                isFromUser: false,
                isSystemMessage: false,
                metadata: [
                    "source": "periodic_agent",
                    "task_id": task.id.uuidString,
                    "action": task.action
                ]
            )

            chatViewModel.messages.append(agentMessage)
        }
    }

    // MARK: - Persistence

    private func saveTasks() {
        if let encoded = try? JSONEncoder().encode(activeTasks) {
            UserDefaults.standard.set(encoded, forKey: "PeriodicTasks")
        }
    }

    private func loadTasks() {
        if let data = UserDefaults.standard.data(forKey: "PeriodicTasks"),
           let tasks = try? JSONDecoder().decode([PeriodicTask].self, from: data) {
            self.activeTasks = tasks

            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
            for task in tasks where task.isActive {
                scheduleTask(task)
            }
        }
    }

    // MARK: - Helper Methods

    func getActiveTasks() -> [PeriodicTask] {
        return activeTasks.filter { $0.isActive }
    }

    func getTaskStatus(id: UUID) -> String? {
        guard let task = activeTasks.first(where: { $0.id == id }) else {
            return nil
        }

        let formatter = DateFormatter()
        formatter.timeStyle = .short

        if task.isActive {
            let nextExecution = formatter.string(from: task.nextExecutionAt)
            return "–ê–∫—Ç–∏–≤–Ω–∞ ‚Ä¢ –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: \(nextExecution)"
        } else {
            return "–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
        }
    }
}
```

---

### 4. WeatherService (Swift)

```swift
// Services/WeatherService.swift
import Foundation

class WeatherService {
    private let mcpService: MCPService
    private var isConnected = false

    init() {
        self.mcpService = MCPService()
    }

    func configure() async throws {
        mcpService.initializeClient()

        // –ü—É—Ç—å –∫ MCP weather server
        let serverPath = FileManager.default.currentDirectoryPath + "/mcp-weather-server/build/index.js"
        let command = ["node", serverPath]

        try await mcpService.connect(serverCommand: command)
        isConnected = true
    }

    func getWeatherSummary(city: String) async throws -> String {
        guard isConnected else {
            throw NSError(domain: "WeatherService", code: -1,
                        userInfo: [NSLocalizedDescriptionKey: "Weather service not connected"])
        }

        let result = try await mcpService.callTool(
            name: "get_weather_summary",
            arguments: ["city": .string(city)]
        )

        if result.isError {
            let errorText = extractTextFromContent(result.content)
            throw NSError(domain: "WeatherService", code: -2,
                        userInfo: [NSLocalizedDescriptionKey: errorText])
        }

        return extractTextFromContent(result.content)
    }

    private func extractTextFromContent(_ content: [MCP.Tool.Content]) -> String {
        var result = ""
        for item in content {
            switch item {
            case .text(let text):
                result += text
            default:
                break
            }
        }
        return result
    }
}
```

---

### 5. PeriodicTaskTools (MCP Tools –¥–ª—è Claude)

```swift
// Services/PeriodicTaskTools.swift
import Foundation

class PeriodicTaskToolsProvider {

    static func getTools() -> [ClaudeTool] {
        return [
            createPeriodicTaskTool(),
            listPeriodicTasksTool(),
            stopPeriodicTaskTool(),
            resumePeriodicTaskTool()
        ]
    }

    private static func createPeriodicTaskTool() -> ClaudeTool {
        return ClaudeTool(
            name: "create_periodic_task",
            description: """
            –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º.

            –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç:
            - "–ü—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –ø–æ–≥–æ–¥—É –∫–∞–∂–¥—ã–π —á–∞—Å"
            - "–ü–æ–∫–∞–∑—ã–≤–∞–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–¥–∞—á –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ"
            - "–ù–∞–ø–æ–º–∏–Ω–∞–π –æ —á—ë–º-—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ"

            –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
            - get_weather_summary: –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –ø–æ–≥–æ–¥—ã
            - get_yandex_tracker_stats: –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ Tracker
            """,
            properties: [
                "action": ClaudeTool.InputSchema.Property(
                    type: "string",
                    description: "–î–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (get_weather_summary, get_yandex_tracker_stats)",
                    enum: ["get_weather_summary", "get_yandex_tracker_stats"]
                ),
                "parameters": ClaudeTool.InputSchema.Property(
                    type: "string",
                    description: "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON, –Ω–∞–ø—Ä–∏–º–µ—Ä: {\"city\": \"Moscow\"}"
                ),
                "interval_minutes": ClaudeTool.InputSchema.Property(
                    type: "string",
                    description: "–ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: 60 –¥–ª—è —á–∞—Å–∞, 1440 –¥–ª—è —Å—É—Ç–æ–∫)"
                )
            ],
            required: ["action", "interval_minutes"]
        )
    }

    private static func listPeriodicTasksTool() -> ClaudeTool {
        return ClaudeTool(
            name: "list_periodic_tasks",
            description: "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á",
            properties: [:],
            required: nil
        )
    }

    private static func stopPeriodicTaskTool() -> ClaudeTool {
        return ClaudeTool(
            name: "stop_periodic_task",
            description: "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É",
            properties: [
                "task_id": ClaudeTool.InputSchema.Property(
                    type: "string",
                    description: "ID –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏"
                )
            ],
            required: ["task_id"]
        )
    }

    private static func resumePeriodicTaskTool() -> ClaudeTool {
        return ClaudeTool(
            name: "resume_periodic_task",
            description: "–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É",
            properties: [
                "task_id": ClaudeTool.InputSchema.Property(
                    type: "string",
                    description: "ID –∑–∞–¥–∞—á–∏ –¥–ª—è –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
                )
            ],
            required: ["task_id"]
        )
    }

    // MARK: - Execution

    static func executeTool(
        name: String,
        input: [String: Any],
        periodicTaskService: PeriodicTaskService
    ) async throws -> String {
        switch name {
        case "create_periodic_task":
            return try await executeCreateTask(input: input, service: periodicTaskService)

        case "list_periodic_tasks":
            return executeListTasks(service: periodicTaskService)

        case "stop_periodic_task":
            return try executeStopTask(input: input, service: periodicTaskService)

        case "resume_periodic_task":
            return try executeResumeTask(input: input, service: periodicTaskService)

        default:
            throw NSError(domain: "PeriodicTaskTools", code: -1,
                        userInfo: [NSLocalizedDescriptionKey: "Unknown tool: \(name)"])
        }
    }

    private static func executeCreateTask(
        input: [String: Any],
        service: PeriodicTaskService
    ) async throws -> String {
        guard let action = input["action"] as? String,
              let intervalStr = input["interval_minutes"] as? String,
              let interval = Int(intervalStr) else {
            throw NSError(domain: "PeriodicTaskTools", code: -2,
                        userInfo: [NSLocalizedDescriptionKey: "Invalid parameters"])
        }

        var parameters: [String: String] = [:]
        if let paramsStr = input["parameters"] as? String,
           let paramsData = paramsStr.data(using: .utf8),
           let paramsDict = try? JSONDecoder().decode([String: String].self, from: paramsData) {
            parameters = paramsDict
        }

        let task = service.createTask(
            action: action,
            parameters: parameters,
            intervalMinutes: interval
        )

        return """
        ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

        –î–µ–π—Å—Ç–≤–∏–µ: \(action)
        –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ \(interval) –º–∏–Ω—É—Ç
        ID –∑–∞–¥–∞—á–∏: \(task.id.uuidString)

        –ü–µ—Ä–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—á–Ω—ë—Ç—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, —Å–ª–µ–¥—É—é—â–µ–µ - —á–µ—Ä–µ–∑ \(interval) –º–∏–Ω—É—Ç.
        """
    }

    private static func executeListTasks(service: PeriodicTaskService) -> String {
        let tasks = service.getActiveTasks()

        if tasks.isEmpty {
            return "üìã –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á."
        }

        var result = "üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:\n\n"

        for task in tasks {
            let intervalMin = Int(task.interval / 60)
            let status = service.getTaskStatus(id: task.id) ?? "Unknown"

            result += """
            ‚Ä¢ \(task.action)
              ID: \(task.id.uuidString.prefix(8))...
              –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ \(intervalMin) –º–∏–Ω—É—Ç
              –°—Ç–∞—Ç—É—Å: \(status)
              –í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–∑: \(task.executionCount)

            """
        }

        return result
    }

    private static func executeStopTask(
        input: [String: Any],
        service: PeriodicTaskService
    ) throws -> String {
        guard let taskIdStr = input["task_id"] as? String,
              let taskId = UUID(uuidString: taskIdStr) else {
            throw NSError(domain: "PeriodicTaskTools", code: -3,
                        userInfo: [NSLocalizedDescriptionKey: "Invalid task_id"])
        }

        service.stopTask(id: taskId)
        return "‚è∏Ô∏è –ó–∞–¥–∞—á–∞ \(taskIdStr.prefix(8))... –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞."
    }

    private static func executeResumeTask(
        input: [String: Any],
        service: PeriodicTaskService
    ) throws -> String {
        guard let taskIdStr = input["task_id"] as? String,
              let taskId = UUID(uuidString: taskIdStr) else {
            throw NSError(domain: "PeriodicTaskTools", code: -4,
                        userInfo: [NSLocalizedDescriptionKey: "Invalid task_id"])
        }

        service.resumeTask(id: taskId)
        return "‚ñ∂Ô∏è –ó–∞–¥–∞—á–∞ \(taskIdStr.prefix(8))... –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞."
    }
}
```

---

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ChatViewModel

```swift
// –í ChatViewModel.swift

class ChatViewModel: ObservableObject {
    // ... existing code

    private let periodicTaskService: PeriodicTaskService
    private let weatherService = WeatherService()

    init(settings: Settings) {
        self.settings = settings
        self.periodicTaskService = PeriodicTaskService(
            weatherService: weatherService,
            chatViewModel: self // –ø–µ—Ä–µ–¥–∞—ë–º self –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
        )

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º weather service
        Task {
            try? await weatherService.configure()
        }
    }

    // –í –º–µ—Ç–æ–¥–µ sendToClaudeDirectly –¥–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    func sendToClaudeDirectly(message: String) {
        // ... existing code ...

        // –î–æ–±–∞–≤–ª—è–µ–º periodic task tools
        let periodicTools = PeriodicTaskToolsProvider.getTools()
        tools.append(contentsOf: periodicTools)

        // ... rest of code
    }

    // –í handleToolUse –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É periodic task tools
    private func handleToolUse(...) async {
        // ... existing code ...

        if toolName.starts(with: "create_periodic_task") ||
           toolName.starts(with: "list_periodic_tasks") ||
           toolName.starts(with: "stop_periodic_task") ||
           toolName.starts(with: "resume_periodic_task") {

            let result = try await PeriodicTaskToolsProvider.executeTool(
                name: toolName,
                input: toolInput,
                periodicTaskService: periodicTaskService
            )

            // Add result to toolResults
        }
    }
}
```

---

## üé¨ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–∏–∞–ª–æ–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
–ü–∏—à–∏ –º–Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ –∫–∞–∂–¥—ã–π —á–∞—Å

ü§ñ Claude:
–•–æ—Ä–æ—à–æ! –Ø —Å–æ–∑–¥–∞–º –¥–ª—è –≤–∞—Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç
–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ –∫–∞–∂–¥—ã–π —á–∞—Å.

[Claude –≤—ã–∑—ã–≤–∞–µ—Ç create_periodic_task]

‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

–î–µ–π—Å—Ç–≤–∏–µ: get_weather_summary
–ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ 60 –º–∏–Ω—É—Ç
ID –∑–∞–¥–∞—á–∏: a1b2c3d4...

–ü–µ—Ä–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—é –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ —á–∞—Å):

```
ü§ñ –ü–æ–≥–æ–¥–Ω—ã–π –∞–≥–µ–Ω—Ç ‚Ä¢ 14:00
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ:

‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: +15¬∞C (–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ +13¬∞C)
‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å
‚Ä¢ –í–µ—Ç–µ—Ä: 5 –º/—Å, —Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–Ω—ã–π
‚Ä¢ –í–ª–∞–∂–Ω–æ—Å—Ç—å: 65%
‚Ä¢ –î–∞–≤–ª–µ–Ω–∏–µ: 745 –º–º —Ä—Ç. —Å—Ç.
‚Ä¢ –û–±–ª–∞—á–Ω–æ—Å—Ç—å: 40%

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 14:00
–°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 15:00
```

### –î–∏–∞–ª–æ–≥ 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

ü§ñ Claude:
üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:

‚Ä¢ get_weather_summary
  ID: a1b2c3d4...
  –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ 60 –º–∏–Ω—É—Ç
  –°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–∞ ‚Ä¢ –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: 15:00
  –í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–∑: 3
```

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
–û—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–¥–∞—á—É

ü§ñ Claude:
‚è∏Ô∏è –ó–∞–¥–∞—á–∞ a1b2c3d4... –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã –±–æ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
AIAdventChatV2/
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îî‚îÄ‚îÄ PeriodicTask.swift                    # NEW
‚îÇ
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ PeriodicTaskService.swift            # NEW
‚îÇ   ‚îú‚îÄ‚îÄ PeriodicTaskTools.swift              # NEW
‚îÇ   ‚îú‚îÄ‚îÄ WeatherService.swift                 # NEW
‚îÇ   ‚îú‚îÄ‚îÄ YandexTrackerService.swift
‚îÇ   ‚îî‚îÄ‚îÄ ClaudeService.swift
‚îÇ
‚îú‚îÄ‚îÄ ViewModels/
‚îÇ   ‚îî‚îÄ‚îÄ ChatViewModel.swift                  # MODIFIED
‚îÇ
‚îî‚îÄ‚îÄ Views/
    ‚îú‚îÄ‚îÄ ChatView.swift
    ‚îî‚îÄ‚îÄ PeriodicTasksView.swift              # NEW (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

mcp-weather-server/                           # NEW
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ build/
    ‚îî‚îÄ‚îÄ index.js
```

---

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: MCP Weather Server (1 –¥–µ–Ω—å)

1. –°–æ–∑–¥–∞—Ç—å `mcp-weather-server/` –ø—Ä–æ–µ–∫—Ç
2. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á –æ—Ç OpenWeatherMap (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_weather_summary` –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
4. –°–æ–±—Ä–∞—Ç—å: `npm run build`

### –≠—Ç–∞–ø 2: PeriodicTaskService (1-2 –¥–Ω—è)

1. –°–æ–∑–¥–∞—Ç—å `PeriodicTask` –º–æ–¥–µ–ª—å
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `PeriodicTaskService` —Å Timer
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å persistence (UserDefaults –∏–ª–∏ SQLite)
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `WeatherService`

### –≠—Ç–∞–ø 3: MCP Tools –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (1 –¥–µ–Ω—å)

1. –°–æ–∑–¥–∞—Ç—å `PeriodicTaskTools`
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å ChatViewModel
3. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É tool_use –¥–ª—è periodic tasks

### –≠—Ç–∞–ø 4: UI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 1 –¥–µ–Ω—å)

1. –°–æ–∑–¥–∞—Ç—å `PeriodicTasksView` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
2. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
3. –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø

---

## üìù –ò—Ç–æ–≥–æ

### –ß—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è:

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç: "–ü—Ä–∏—Å—ã–ª–∞–π –ø–æ–≥–æ–¥—É –∫–∞–∂–¥—ã–π —á–∞—Å"
‚úÖ Claude —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É
‚úÖ –ö–∞–∂–¥—ã–π —á–∞—Å –≤ —á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã
‚úÖ –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ —á–∞—Ç
‚úÖ –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MVP (2-3 –¥–Ω—è):

- Weather MCP Server
- PeriodicTaskService —Å Timer
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

- üåç –†–∞–∑–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ Yandex Tracker
- üìÖ –†–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã (—á–∞—Å, –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—è)
- ‚è∞ –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
- üîî Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ/–≤–º–µ—Å—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —á–∞—Ç–µ

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é?** üöÄ
